(()=>{"use strict";class t extends HTMLElement{#t={};#e={};#i=!1;#n={};#s=new Set(["number","integer","string","boolean"]);#r={};get $(){return this.#r}constructor(){super();let t=this.props||{};Object.defineProperties(this,Object.entries(t).reduce(((t,[e,i])=>{let n=i.attr||this.#a(e);return this.#t[n]={name:e,prop:i},null!=i.handler&&(this.#n[e]=t=>i.handler.apply(this,[t.detail]),this.addEventListener("$"+e,this.#n[e])),this.hasOwnProperty(e)?this.#e[e]=this[e]:"boolean"===i.type&&null==this.getAttribute(n)&&i.default&&(this.#e[e]=!0),t[e]={get:()=>{this.#l();let t=this.getAttribute(n);return null!=t&&""!==t||"boolean"===i.type?this.#o(t,i.type):i.default},set:t=>{this.#l(e),"boolean"===i.type?t?this.setAttribute(n,""):this.removeAttribute(n):this.setAttribute(n,t)}},t}),{}))}#l(t){if(!this.#i){this.#i=!0;for(let e in this.#e)e!==t&&(this[e]=this.#e[e])}}#a(t){return"data-"+t.replaceAll(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}$checkType(t,e){return"integer"==e&&Number.isInteger(t)||["string","boolean","number","object"].includes(e)&&typeof t===e||"array"==e&&Array.isArray(t)}#h(t,e,i){if(!this.#s.has(i))throw new TypeError(`Allowed types are "${this.#s}". Type given: ${i}`);if(!this.$checkType(e,i))throw new TypeError(`Type of "${t}" is ${i}. Value given: ${e}`)}#o(t,e){return"number"===e||"integer"===e?Number(t):"boolean"===e?null!=t:t}connectedCallback(){this.#l()}attributeChangedCallback(t,e,i){let n=this.#t[t],s=n.name,r=n.prop,a=this.#i;if(this.#l(),(a||!(s in this.#e))&&e!==i){if(null==s)return;let n=this.#o(i,r.type);if("boolean"!=r.type)try{if(this.#h(s,n,r.type),r.validator&&!r.validator.apply(this,[n]))throw`Prop "${t}" value ${value} is not valid`}catch(t){return console.error(t),void(null==e?this.removeAttribute(attrName):this.setAttribute(attrName,e))}const a=this.#o(e,r.type);this.dispatchEvent(new CustomEvent("$"+s,{detail:{oldValue:a,newValue:n}}))}}$set(t,e,i=!0){i&&null!=this.#n[t]&&this.removeEventListener("$"+key,this.#n[t]),this[t]=e,i&&null!=this.#n[t]&&this.addEventListener("$"+key,this.#n[t])}#d(t,e,i,n){const{id:s,on:r,attrs:a,name:l,props:o}=e,h="string"==typeof t?document.createElement(t):t;null!=e.class&&(h.className=e.class),null!=s&&(h.id=s),null!=l&&(n[l]=h);for(const t in r||{})h.addEventListener(t,r[t]);"string"==typeof i&&(i=[i]);for(const t of i)"string"==typeof t?h.appendChild(document.createTextNode(t)):Array.isArray(t)&&h.appendChild(this.$createElement(t,n));for(const t in a||{})h.setAttribute(t,a[t]);for(const t in o)h[t]=o[t];return h}$createElement(t,e){e=e||{};let i="div",n={},s=t;return(t[0]instanceof Element||t[0]instanceof DocumentFragment||"string"==typeof t[0])&&(i=t[0],s=s.slice(1)),"object"!=typeof t[1]||null==t[1]||Array.isArray(t[1])||(n=t[1],s=s.slice(1)),this.#d(i,n,s,e)}$buildShadow(t){this.attachShadow({mode:"open"}),this.$createElement([this.shadowRoot,...t],this.#r)}}customElements.define("rw-overlay",class extends t{#c=!1;#u;#p;#y;constructor(){super(),this.#u=document.createElement("div"),this.#u.style.cssText=`\n      position: fixed;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      z-index: 2147483647;\n      background-color: rgba(${this.props.color.default}, 0);\n      transition: background-color ${this.props.transition.default}ms;\n    `,this.intangible&&(this.#u.style.pointerEvents="none"),this.#y=this.#b.bind(this)}connectedCallback(){this.style.display="none",this.#c=!0}disconnectedCallback(){this.#c=!1}static get observedAttributes(){return["data-opened","data-opacity","data-color","data-transition","data-persistent","data-intangible"]}get props(){return{opened:{type:"boolean",handler(){this.#v()}},opacity:{type:"number",default:0},color:{type:"string",default:"0,0,0"},transition:{type:"number",default:300,handler({newValue:t}){this.#u.style.transition=`background-color ${t}ms`}},persistent:{type:"boolean"},intangible:{type:"boolean",handler({newValue:t}){this.#u.style.pointerEvents=t?"none":null}}}}#b(t){t.target!==this.#u&&this.#u.contains(t.target)||(this.opened=!1,t.stopPropagation())}#v(){if(this.#c)if(this.opened){if(0===this.children.length)return;this.#p=this.children[0],this.intangible&&""===this.#p.style.pointerEvents&&(this.#p.style.pointerEvents="auto"),this.persistent||document.addEventListener("click",this.#y),this.#u.append(this.#p),document.body.append(this.#u),setTimeout((()=>{this.#u.style.backgroundColor=`rgba(${this.color}, ${this.opacity})`}))}else this.persistent||document.removeEventListener("click",this.#y),this.#u.style.backgroundColor=`rgba(${this.color}, 0)`,setTimeout((()=>{this.append(this.#p),document.body.removeChild(this.#u)}),this.transition)}})})();