(()=>{"use strict";class t extends HTMLElement{#t={};#e={};#n=!1;#i={};#s=new Set(["number","integer","string","boolean"]);#a={};get $(){return this.#a}constructor(){super();let t=this.props||{};Object.defineProperties(this,Object.entries(t).reduce(((t,[e,n])=>{let i=n.attr||this.#o(e);return this.#t[i]={name:e,prop:n},null!=n.handler&&(this.#i[e]=t=>n.handler.apply(this,[t.detail]),this.addEventListener("$"+e,this.#i[e])),this.hasOwnProperty(e)?this.#e[e]=this[e]:"boolean"===n.type&&null==this.getAttribute(i)&&n.default&&(this.#e[e]=!0),t[e]={get:()=>{this.#r();let t=this.getAttribute(i);return null!=t&&""!==t||"boolean"===n.type?this.#l(t,n.type):n.default},set:t=>{this.#r(e),"boolean"===n.type?t?this.setAttribute(i,""):this.removeAttribute(i):this.setAttribute(i,t)}},t}),{}))}#r(t){if(!this.#n){this.#n=!0;for(let e in this.#e)e!==t&&(this[e]=this.#e[e])}}#o(t){return"data-"+t.replaceAll(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}$checkType(t,e){return"integer"==e&&Number.isInteger(t)||["string","boolean","number","object"].includes(e)&&typeof t===e||"array"==e&&Array.isArray(t)}#h(t,e,n){if(!this.#s.has(n))throw new TypeError(`Allowed types are "${this.#s}". Type given: ${n}`);if(!this.$checkType(e,n))throw new TypeError(`Type of "${t}" is ${n}. Value given: ${e}`)}#l(t,e){return"number"===e||"integer"===e?Number(t):"boolean"===e?null!=t:t}connectedCallback(){this.#r()}attributeChangedCallback(t,e,n){let i=this.#t[t],s=i.name,a=i.prop,o=this.#n;if(this.#r(),(o||!(s in this.#e))&&e!==n){if(null==s)return;let i=this.#l(n,a.type);if("boolean"!=a.type)try{if(this.#h(s,i,a.type),a.validator&&!a.validator.apply(this,[i]))throw`Prop "${t}" value ${value} is not valid`}catch(t){return console.error(t),void(null==e?this.removeAttribute(attrName):this.setAttribute(attrName,e))}const o=this.#l(e,a.type);this.dispatchEvent(new CustomEvent("$"+s,{detail:{oldValue:o,newValue:i}}))}}$set(t,e,n=!0){const i=this.#i[t];n&&null!=i&&this.removeEventListener("$"+key,i),this[t]=e,n&&null!=i&&setTimeout((()=>this.addEventListener("$"+key,i)))}#d(t,e,n,i){const{id:s,on:a,attrs:o,name:r,props:l}=e,h="string"==typeof t?document.createElement(t):t;null!=e.class&&(h.className=e.class),null!=s&&(h.id=s),null!=r&&(i[r]=h);for(const t in a||{})h.addEventListener(t,a[t]);"string"==typeof n&&(n=[n]);for(const t of n)"string"==typeof t?h.appendChild(document.createTextNode(t)):Array.isArray(t)&&h.appendChild(this.$createElement(t,i));for(const t in o||{})h.setAttribute(t,o[t]);for(const t in l)h[t]=l[t];return h}$createElement(t,e){e=e||{};let n="div",i={},s=t;return(t[0]instanceof Element||t[0]instanceof DocumentFragment||"string"==typeof t[0])&&(n=t[0],s=s.slice(1)),"object"!=typeof t[1]||null==t[1]||Array.isArray(t[1])||(i=t[1],s=s.slice(1)),this.#d(n,i,s,e)}$buildShadow(t){this.attachShadow({mode:"open"}),this.$createElement([this.shadowRoot,...t],this.#a)}}customElements.define("rw-overlay",class extends t{#c=!1;#u;#p;#y;#b;constructor(){super(),this.#u=document.createElement("div"),this.#u.style.cssText=`\n      position: fixed;\n      width: 100%;\n      height: 100%;\n      top: 0;\n      left: 0;\n      z-index: 2147483647;\n      background-color: rgba(${this.props.color.default}, 0);\n      transition: background-color ${this.props.transition.default}ms;\n    `,this.intangible&&(this.#u.style.pointerEvents="none"),this.#y=this.#v.bind(this),this.$buildShadow([["slot",{name:"content"}]]),this.#b=this.#m.bind(this),this.$.content.addEventListener("slotchange",this.#b)}connectedCallback(){this.style.display="none",this.#c=!0}disconnectedCallback(){this.#c=!1}static get observedAttributes(){return["data-opened","data-opacity","data-color","data-transition","data-persistent","data-intangible"]}get props(){return{opened:{type:"boolean",handler(){this.#g()}},opacity:{type:"number",default:0},color:{type:"string",default:"0,0,0"},transition:{type:"number",default:300,handler({newValue:t}){this.#u.style.transition=`background-color ${t}ms`}},persistent:{type:"boolean"},intangible:{type:"boolean",handler({newValue:t}){this.#u.style.pointerEvents=t?"none":null}}}}#v(t){t.target!==this.#u&&this.#u.contains(t.target)||(this.opened=!1,t.stopPropagation())}#m(){this.#u.innerHTML="";const t=this.$.content.assignedElements({flatten:!0});1===t.length?(this.#p=t[0],this.$.content.removeEventListener("slotchange",this.#b),this.#u.append(this.#p),setTimeout((()=>{this.$.content.addEventListener("slotchange",this.#b)}))):console.error("The content of rowi-overlay must be one element, no more no less. All of the contents of the overlay must be included in that single element")}#g(){this.#c&&(this.opened?(this.intangible&&""===this.#p.style.pointerEvents&&(this.#p.style.pointerEvents="auto"),this.persistent||document.addEventListener("click",this.#y),document.body.append(this.#u),setTimeout((()=>{this.#u.style.backgroundColor=`rgba(${this.color}, ${this.opacity})`}))):(this.persistent||document.removeEventListener("click",this.#y),this.#u.style.backgroundColor=`rgba(${this.color}, 0)`,setTimeout((()=>document.body.removeChild(this.#u)),this.transition)))}})})();